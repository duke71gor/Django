{% extends 'mainapp/base.html' %}
{% load custom_tags %}

{% block title %}
    kаталог
{% endblock %}

{% block content %}
    <hr>
    <br>
    <h1>Категории:</h1>
    {% include 'mainapp/includes/inc_categories_menu.html' %}
    <h2>Продукты:</h2>
    <div>Количество продуктов в корзине: {{ request.user|basket_total_quantity }}</div>
    <div>Общая стоимость корзины: {{ request.user|basket_total_cost }} руб.</div>
    <div style="display: flex; flex-wrap: wrap;" class="category-products clearfix">
        {% for product in products %}
            <div class="block">
                <div class="card">
                    <img src="/media/{{ product.image }}" class='card-img-top' alt="{{ product.short_desc }}">
                    <div class="card-body">
                        <h5 class="card-title">{{ product.name }}</h5>
                        <h6 class="card-title">Цена: {{ product.price }} руб.</h6>
                        <p class="card-text">{{ product.short_desc }}</p>
                        <a href="{% url 'basket:add' product.pk %}">Добавить в корзину</a>
                        <br>
                        <a href="{% url 'basket:remove' product.pk %}">Удалить из корзины</a>
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>
{% endblock %}
